function M(){}function tt(t){return t()}function X(){return Object.create(null)}function T(t){t.forEach(tt)}function it(t){return typeof t=="function"}function rt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ot(t){return Object.keys(t).length===0}let B=!1;function lt(){B=!0}function st(){B=!1}function at(t,e,n,s){for(;t<e;){const l=t+(e-t>>1);n(l)<=s?t=l+1:e=l}return t}function ct(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const i=[];for(let o=0;o<e.length;o++){const u=e[o];u.claim_order!==void 0&&i.push(u)}e=i}const n=new Int32Array(e.length+1),s=new Int32Array(e.length);n[0]=-1;let l=0;for(let i=0;i<e.length;i++){const o=e[i].claim_order,u=(l>0&&e[n[l]].claim_order<=o?l+1:at(1,l,v=>e[n[v]].claim_order,o))-1;s[i]=n[u]+1;const _=u+1;n[_]=i,l=Math.max(_,l)}const c=[],r=[];let a=e.length-1;for(let i=n[l]+1;i!=0;i=s[i-1]){for(c.push(e[i-1]);a>=i;a--)r.push(e[a]);a--}for(;a>=0;a--)r.push(e[a]);c.reverse(),r.sort((i,o)=>i.claim_order-o.claim_order);for(let i=0,o=0;i<r.length;i++){for(;o<c.length&&r[i].claim_order>=c[o].claim_order;)o++;const u=o<c.length?c[o]:null;t.insertBefore(r[i],u)}}function p(t,e){if(B){for(ct(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentNode!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function ut(t,e,n){B&&!n?p(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function D(){return q(" ")}function F(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function ft(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t){return Array.from(t.childNodes)}function dt(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function et(t,e,n,s,l=!1){dt(t);const c=(()=>{for(let r=t.claim_info.last_index;r<t.length;r++){const a=t[r];if(e(a)){const i=n(a);return i===void 0?t.splice(r,1):t[r]=i,l||(t.claim_info.last_index=r),a}}for(let r=t.claim_info.last_index-1;r>=0;r--){const a=t[r];if(e(a)){const i=n(a);return i===void 0?t.splice(r,1):t[r]=i,l?i===void 0&&t.claim_info.last_index--:t.claim_info.last_index=r,a}}return s()})();return c.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,c}function ht(t,e,n,s){return et(t,l=>l.nodeName===e,l=>{const c=[];for(let r=0;r<l.attributes.length;r++){const a=l.attributes[r];n[a.name]||c.push(a.name)}c.forEach(r=>l.removeAttribute(r))},()=>s(e))}function x(t,e,n){return ht(t,e,n,b)}function V(t,e){return et(t,n=>n.nodeType===3,n=>{const s=""+e;if(n.data.startsWith(s)){if(n.data.length!==s.length)return n.splitText(s.length)}else n.data=s},()=>q(e),!0)}function O(t){return V(t," ")}function A(t,e){t.value=e??""}let W;function N(t){W=t}const k=[],H=[],C=[],Y=[],_t=Promise.resolve();let J=!1;function mt(){J||(J=!0,_t.then(nt))}function R(t){C.push(t)}const U=new Set;let L=0;function nt(){const t=W;do{for(;L<k.length;){const e=k[L];L++,N(e),pt(e.$$)}for(N(null),k.length=0,L=0;H.length;)H.pop()();for(let e=0;e<C.length;e+=1){const n=C[e];U.has(n)||(U.add(n),n())}C.length=0}while(k.length);for(;Y.length;)Y.pop()();J=!1,U.clear(),N(t)}function pt(t){if(t.fragment!==null){t.update(),T(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const gt=new Set;function yt(t,e){t&&t.i&&(gt.delete(t),t.i(e))}function bt(t,e,n,s){const{fragment:l,on_mount:c,on_destroy:r,after_update:a}=t.$$;l&&l.m(e,n),s||R(()=>{const i=c.map(tt).filter(it);r?r.push(...i):T(i),t.$$.on_mount=[]}),a.forEach(R)}function vt(t,e){const n=t.$$;n.fragment!==null&&(T(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xt(t,e){t.$$.dirty[0]===-1&&(k.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function wt(t,e,n,s,l,c,r,a=[-1]){const i=W;N(t);const o=t.$$={fragment:null,ctx:null,props:c,update:M,not_equal:l,bound:X(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:X(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};r&&r(o.root);let u=!1;if(o.ctx=n?n(t,e.props||{},(_,v,...m)=>{const f=m.length?m[0]:v;return o.ctx&&l(o.ctx[_],o.ctx[_]=f)&&(!o.skip_bound&&o.bound[_]&&o.bound[_](f),u&&xt(t,_)),v}):[],o.update(),u=!0,T(o.before_update),o.fragment=s?s(o.ctx):!1,e.target){if(e.hydrate){lt();const _=S(e.target);o.fragment&&o.fragment.l(_),_.forEach(w)}else o.fragment&&o.fragment.c();e.intro&&yt(t.$$.fragment),bt(t,e.target,e.anchor,e.customElement),st(),nt()}N(i)}class It{$destroy(){vt(this,1),this.$destroy=M}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function St(t){let e,n,s,l,c,r,a,i,o,u,_,v,m,f,E,h,I,$;return{c(){e=b("div"),n=b("div"),s=b("h1"),l=q("Login with your PhoneID"),c=D(),r=b("form"),a=b("div"),i=b("input"),o=D(),u=b("button"),_=q("Login"),v=D(),m=b("form"),f=b("input"),E=D(),h=b("input"),this.h()},l(g){e=x(g,"DIV",{class:!0});var y=S(e);n=x(y,"DIV",{class:!0});var z=S(n);s=x(z,"H1",{class:!0});var G=S(s);l=V(G,"Login with your PhoneID"),G.forEach(w),z.forEach(w),c=O(y),r=x(y,"FORM",{class:!0});var j=S(r);a=x(j,"DIV",{class:!0});var K=S(a);i=x(K,"INPUT",{type:!0,class:!0,name:!0,id:!0,placeholder:!0}),K.forEach(w),o=O(j),u=x(j,"BUTTON",{type:!0,class:!0});var Q=S(u);_=V(Q,"Login"),Q.forEach(w),j.forEach(w),v=O(y),m=x(y,"FORM",{id:!0,method:!0});var P=S(m);f=x(P,"INPUT",{type:!0,name:!0,id:!0}),E=O(P),h=x(P,"INPUT",{type:!0,name:!0,id:!0}),P.forEach(w),y.forEach(w),this.h()},h(){d(s,"class","h4 text-gray-900 mb-4"),d(n,"class","text-center"),d(i,"type","text"),i.required=!0,d(i,"class","form-control form-control-user"),d(i,"name","subject"),d(i,"id","subject"),d(i,"placeholder","Identifier"),d(a,"class","form-group"),d(u,"type","submit"),d(u,"class","btn btn-primary btn-user btn-block"),d(r,"class","user m-5 mt-0"),d(f,"type","text"),f.required=!0,d(f,"name","username"),d(f,"id","username"),d(h,"type","text"),h.required=!0,d(h,"name","password"),d(h,"id","password"),d(m,"id","form2"),d(m,"method","post"),m.hidden=!0,d(e,"class","p-3 pt-5")},m(g,y){ut(g,e,y),p(e,n),p(n,s),p(s,l),p(e,c),p(e,r),p(r,a),p(a,i),p(r,o),p(r,u),p(u,_),p(e,v),p(e,m),p(m,f),A(f,t[0]),p(m,E),p(m,h),A(h,t[1]),t[6](m),I||($=[F(r,"submit",ft(t[3])),F(f,"input",t[4]),F(h,"input",t[5])],I=!0)},p(g,[y]){y&1&&f.value!==g[0]&&A(f,g[0]),y&2&&h.value!==g[1]&&A(h,g[1])},i:M,o:M,d(g){g&&w(e),t[6](null),I=!1,T($)}}}const Z="";function $t(t,e,n){const s=async f=>{console.log(f);const h=new FormData(f.target).get("subject").toString(),I={subject:h};var $=JSON.stringify(I);console.log($);const g=await fetch(`${Z}/mobileid/api/authentication/`,{headers:{"Content-Type":"application/json"},method:"POST",body:$});if(g.status==200){var y=await g.json();console.log(y),r(y.authenticationSessionId),sessionStorage.setItem("sessionId",y.authenticationSessionId),n(0,i=h)}console.log()},l=()=>{clearInterval(c)};var c;const r=f=>{c=setInterval(a,2e3)},a=async()=>{var f=sessionStorage.getItem("sessionId");const E={authenticationSessionId:f},h=await fetch(`${Z}/mobileid/api/authentication/get`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(E)});if(h.status==200){var I=await h.json();console.log(I);const $=I.payload;l(),n(1,o=$),await new Promise(g=>setTimeout(g,300)),u.submit()}else h.status==204?console.log("still waiting"):(l(),console.log("Stopped polling due to server response"))};var i="",o="";let u;function _(){i=this.value,n(0,i)}function v(){o=this.value,n(1,o)}function m(f){H[f?"unshift":"push"](()=>{u=f,n(2,u)})}return[i,o,u,s,_,v,m]}class Et extends It{constructor(e){super(),wt(this,e,$t,St,rt,{})}}export{Et as default};
